<!doctype html>
<html lang="ja" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="robots" content="noindex">
    <title><%= gen_title %></title>
    <link rel="alternate" type="application/rss+xml" title="rss" href="https://www.don.to/diary/index.rdf">
    <link href="/pagefind/pagefind-ui.css" rel="stylesheet">
    <%= stylesheet_link_tag "code" %>
    <%= stylesheet_link_tag "photoswipe" %>
    <%= stylesheet_link_tag "style" %>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@200..900&family=Reenie+Beanie&display=swap" rel="stylesheet">
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="apple-touch-icon" href="/images/ipod-icon.png">
    <meta name="viewport" content="width=device-width, user-scalable=yes, maximum-scale=2.0000">
    <meta property="og:site_name" content="すみかわ日記">
    <meta property="og:title" content="<%= gen_title %>">
  </head>

  <body data-source-path="<%= current_page.source_file.sub(File.expand_path(config[:source]), '') %>">
    <div class="container">
      <div class="centerblock">
        <% if current_page.data.top == true %>
          <div class="titleblock">
            <div id="dayd">Daydreamers On the Net</div>
            <br />
            <div id="doyou">- Do you dream a daydream? -</div>
          </div>
        <% else %>
          <div class="titleblock">
            <h2><a href="/">すみかわ日記</a></h2>
          </div>
        <% end %>
        <div class="mainblock">
          <div id="search"></div>
          <% unless current_page.data.top == true %>
          <h2 data-pagefind-sort="date:<%= gen_date %>"><%= gen_title %></h2>
          <% end %>
          <main data-pagefind-body>
            <%= yield %>
          </main>

          <%= diary_nav(current_page, sitemap) %>

          <hr>
          <div id="name">SUMIKAWA Munechika / Daydreamers On the Net</div>
        </div>
      </div>
      <div class="leftblock">
        <%= partial "layouts/photofooter" %>
      </div>
      <%= partial "layouts/pswp" %>
    </div>
    <script src="/pagefind/pagefind-ui.js"></script>
    <%= javascript_include_tag "diary" %>
    <%= javascript_include_tag "photoswipe.umd.min" %>
    <%= javascript_include_tag "photoswipe-init" %>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.5.0/dist/mermaid.min.js"></script>

    <%# Simple editor for local development %>
    <% if config[:environment] == :development %>
      <div id="edit-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 2000; align-items: center; justify-content: center;">
        <div style="background-color: white; padding: 20px; border-radius: 5px; width: 80%; height: 80%; display: flex; flex-direction: column;">
          <textarea id="edit-textarea" style="width: 100%; height: 100%; flex-grow: 1; border: 1px solid #ccc; padding: 10px; box-sizing: border-box; font-family: monospace;"></textarea>
          <div style="margin-top: 10px; text-align: right;">
            <button id="save-button" style="padding: 8px 15px; margin-left: 10px;">Save</button>
            <button id="cancel-button" style="padding: 8px 15px; margin-left: 10px;">Cancel</button>
          </div>
        </div>
      </div>
      <button id="edit-button" style="position: fixed; bottom: 10px; right: 10px; z-index: 1000; padding: 10px 15px; background-color: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">Edit this page</button>
    <% end %>
  </body>
</html>
