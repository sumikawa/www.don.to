---
title: PSPユーザのためのffmpegの最適オプション
tags: PSP, video, tech
---
PSPでビデオ観るのにffmpegのオプションを色々チューニングして遊んでますが、現在のオプションはこれ。

<pre class="terminal">
ffmpeg -i hoge.mpg -title hoge -vcodec libx264 -coder 1
  -bufsize 128 -g 250 -s 480x272 -r 29.97 -b 180k -vlevel 21 -acodec libfaac -ac 1 -ar 44100 \
  -ab 48k -f mp4 hoge.mp4
</pre>

vcodecとacodecの引数はffmpegの最新ビルド用です。
携帯動画変換君同梱版などの古いバージョンを使ってる人はh264とかaacの引数に変えること。
あと全ての映像が16:9になるので4:3の映像ソースはPSPの画像オプションで切り替えること。

30分の映像でで50MB強ぐらいに圧縮できます。
4GBのメモリースティックなら40時間近く入る計算。

ここまで来ると映像よりも音声データの圧縮率の方が気になってくるので、
音声をモノラル化して圧縮率を稼いでいます。
ステレオ音声がいい人は -ac 2 -ar 44100 -ab 96kにすること。
