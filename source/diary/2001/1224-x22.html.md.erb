---
title: X22が来た
---
[2002/01/13 追記] 大幅に情報を更新ました。<a href="../../2002/0213-x22/">こっち</a>を参照のこと

サンタさんからのプレゼント、
ThinkPad <a href="http://www-6.ibm.com/jp/shop/tpx22.html">X22</a>が来ました。
起動すんの確認して速攻電源断。i1800に刺さってた30GB HDD(3日後40GB購入)と入れ換える。
素のFreeBSD 4.4ではapm resume後のATAが調子悪いらしいので、4-STABLEから作った
<a href="https://gist.github.com/sumikawa/58c8a258d06447a861c81a778d567a11">パッチ</a>を当てる。KAMEにはcommit済み。

Mobile Radion用のXree86-4は<a href="http://dl-lab.aist-nara.ac.jp/~hisakazu/">ここ</a>から入手。ちゃんと動いてくれてますが、キーリピート間隔を短くしてもapm suspend後に戻ってしまうのが悲しい。
サウンドはT23と同じCirrus Logic CS4299Lなんで、
<a href="http://www.clave.gr.jp/ml/bsd-nomads/200109/msg00028.html">bsd-nomads</a>
に出てたパッチを当てるも初期化処理に失敗して動かず。なんでじゃー。
内蔵モデムはまだ認識してません。また、更新します。

802.11bも内蔵だけど、PCIみたいなので、wiドライバをISAからPCIに移植しないといけない。
結構大変そう。NetBSD-currentは動いてるらしい。hiddyの<a href="http://www.sfc.wide.ad.jp/~hiddy/software/wi_pci_netbsd/index.html">ページ</a>。

dmesgの結果。メモリ640MBよん。ほほほ。

<pre class="terminal">
Copyright (c) 1992-2001 The FreeBSD Project.
Copyright (c) 1979, 1980, 1983, 1986, 1988, 1989, 1991, 1992, 1993, 1994
	The Regents of the University of California. All rights reserved.
FreeBSD 4.4-RELEASE #29: Wed Dec 26 00:26:47 JST 2001
    sumikawa@prince.don.to:/usr/local/src/kame/freebsd4/sys/compile/SUMIKAWA
Timecounter "i8254"  frequency 1193182 Hz
CPU: Pentium III/Pentium III Xeon/Celeron (797.35-MHz 686-class CPU)
  Origin = "GenuineIntel"  Id = 0x6b1  Stepping = 1
  Features=0x383f9ff&lt;FPU,VME,DE,PSE,TSC,MSR,PAE,MCE,CX8,SEP,MTRR,PGE,MCA,CMOV,PAT,PSE36,MMX,FXSR,SSE&gt;
real memory  = 670498816 (654784K bytes)
avail memory = 647208960 (632040K bytes)
Preloaded elf kernel "kernel" at 0xc04ce000.
Pentium Pro MTRR support enabled
Using $PIR table, 14 entries at 0xc00fdeb0
apm0: &lt;APM BIOS&gt; on motherboard
apm: found APM BIOS v1.2, connected at v1.2
npx0: &lt;math processor&gt; on motherboard
npx0: INT 16 interface
pcib0: &lt;Host to PCI bridge&gt; on motherboard
pci0: &lt;PCI bus&gt; on pcib0
pcib1: &lt;Intel 82830MP Host to AGP bridge&gt; at device 1.0 on pci0
pci1: &lt;PCI bus&gt; on pcib1
pci1: &lt;ATI model 4c59 graphics accelerator&gt; at 0.0 irq 11
uhci0: &lt;Intel 82801CA/CAM (ICH3) USB controller USB-A&gt; port 0x1800-0x181f irq 11 at device 29.0 on pci0
usb0: &lt;Intel 82801CA/CAM (ICH3) USB controller USB-A&gt; on uhci0
usb0: USB revision 1.0
uhub0: Intel UHCI root hub, class 9/0, rev 1.00/1.00, addr 1
uhub0: 2 ports with 2 removable, self powered
uhci1: &lt;Intel 82801CA/CAM (ICH3) USB controller USB-B&gt; port 0x1820-0x183f irq 11 at device 29.1 on pci0
usb1: &lt;Intel 82801CA/CAM (ICH3) USB controller USB-B&gt; on uhci1
usb1: USB revision 1.0
uhub1: Intel UHCI root hub, class 9/0, rev 1.00/1.00, addr 1
uhub1: 2 ports with 2 removable, self powered
uhci2: &lt;Intel 82801CA/CAM (ICH3) USB controller USB-C&gt; port 0x1840-0x185f irq 11 at device 29.2 on pci0
usb2: &lt;Intel 82801CA/CAM (ICH3) USB controller USB-C&gt; on uhci2
usb2: USB revision 1.0
uhub2: Intel UHCI root hub, class 9/0, rev 1.00/1.00, addr 1
uhub2: 2 ports with 2 removable, self powered
pcib2: &lt;Intel 82801CA/CAM (ICH3) PCI to PCI bridge&gt; at device 30.0 on pci0
pci2: &lt;PCI bus&gt; on pcib2
pcic0: &lt;Ricoh RL5C476 PCI-CardBus Bridge&gt; mem 0x50000000-0x50000fff irq 11 at device 3.0 on pci2
pccard0: &lt;PC Card bus (classic)&gt; on pcic0
pcic1: &lt;Ricoh RL5C476 PCI-CardBus Bridge&gt; mem 0x50100000-0x50100fff irq 11 at device 3.1 on pci2
pccard1: &lt;PC Card bus (classic)&gt; on pcic1
pci2: &lt;unknown card&gt; (vendor=0x1180, dev=0x0552) at 3.2 irq 11
pci2: &lt;unknown card&gt; (vendor=0x1260, dev=0x3873) at 5.0 irq 11
fxp0: &lt;Intel Pro/100 Ethernet&gt; port 0x8000-0x803f mem 0xc0200000-0xc0200fff irq 11 at device 8.0 on pci2
fxp0: Ethernet address 00:d0:59:83:62:76
inphy0: &lt;i82562ET 10/100 media interface&gt; on miibus0
inphy0:  10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto
isab0: &lt;Intel 82801CA/CAM (ICH3) PCI to LPC bridge&gt; at device 31.0 on pci0
isa0: &lt;ISA bus&gt; on isab0
atapci0: &lt;Intel ICH3 ATA100 controller&gt; port 0x1860-0x186f,0x374-0x377,0x170-0x177,0x3f4-0x3f7,0x1f0-0x1f7 at device 31.1 on pci0
ata0: at 0x1f0 irq 14 on atapci0
ata1: at 0x170 irq 15 on atapci0
pci0: &lt;unknown card&gt; (vendor=0x8086, dev=0x2483) at 31.3 irq 11
pcm0: &lt;Intel 82801CA (ICH3)&gt; port 0x18c0-0x18ff,0x1c00-0x1cff irq 11 at device 31.5 on pci0
pcm0: ac97 analog subsection1 not ready [0]
pcm0: ac97 codec reports dac not ready
pcm0: ac97 invalid mode set 0x0008
pci0: &lt;unknown card&gt; (vendor=0x8086, dev=0x2486) at 31.6 irq 11
orm0: &lt;Option ROMs&gt; at iomem 0xc0000-0xcbfff,0xcc000-0xccfff,0xcd000-0xcdfff,0xdc000-0xdffff,0xe0000-0xeffff on isa0
fdc0: &lt;NEC 72065B or clone&gt; at port 0x3f0-0x3f5,0x3f7 irq 6 drq 2 on isa0
fdc0: FIFO enabled, 8 bytes threshold
fd0: &lt;1440-KB 3.5" drive&gt; on fdc0 drive 0
atkbdc0: &lt;Keyboard controller (i8042)&gt; at port 0x60,0x64 on isa0
atkbd0: &lt;AT Keyboard&gt; irq 1 on atkbdc0
psm0: &lt;PS/2 Mouse&gt; irq 12 on atkbdc0
psm0: model Generic PS/2 mouse, device ID 0
vga0: &lt;Generic ISA VGA&gt; at port 0x3c0-0x3df iomem 0xa0000-0xbffff on isa0
sc0: &lt;System console&gt; on isa0
sc0: VGA &lt;16 virtual consoles, flags=0x200&gt;
sio0: configured irq 3 not in bitmap of probed irqs 0
IPv6 packet filtering initialized, default to accept, unlimited logging
NATPT initialized
IPsec: Initialized Security Association Processing.
IP Filter: v3.4.20 initialized.  Default = pass all, Logging = disabled
ad0: 28615MB &lt;TOSHIBA MK3017GAP&gt; [58140/16/63] at ata0-master UDMA100
Mounting root from ufs:/dev/ad0s2a
pccard: card inserted, slot 0
ad0s3: raw partition size != slice size
ad0s3: start 26671680, end 28768319, size 2096640
ad0s3c: start 26671680, end 28760129, size 2088450
</pre>
