<!doctype html>
<html lang="ja" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="robots" content="noindex" />
    <title>2006/02/23: 仔羊ルーターに5-STABLEをいれる</title>
    <link rel="alternate" type="application/rss+xml" title="rss" href="https://www.don.to/diary/index.rdf" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/docsearch.js@2.6.3/dist/cdn/docsearch.min.css" />
    <link href="/pagefind/pagefind-ui.css" rel="stylesheet">
    <link href="/stylesheets/code.css" rel="stylesheet" />
    <link href="/stylesheets/photoswipe.css" rel="stylesheet" />
    <link href="/stylesheets/style.css" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@200..900&family=Reenie+Beanie&display=swap" rel="stylesheet">
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" href="/images/ipod-icon.png" />
    <meta name="viewport" content="width=device-width, user-scalable=yes, maximum-scale=2.0000" />
    <meta property="og:site_name" content="すみかわ日記">
    <meta property="og:title" content="2006/02/23: 仔羊ルーターに5-STABLEをいれる">
  </head>

  <body>
    <div class="container">
      <div class="centerblock">
          <div class="titleblock">
            <h2><a href="/">すみかわ日記</a></h2>
          </div>
        <div class="mainblock">
          <div id="search"></div>
          <h2 data-pagefind-sort="date:2006-02-23">2006/02/23: 仔羊ルーターに5-STABLEをいれる</h2>
          <main data-pagefind-body>
              <p>イベント等に何かと便利な<a href="http://www.wildlab.com/">仔羊ルーター</a>君ですが、
ずっとFreeBSD 4-STABLEで使ってたんだけど、
pfとか使いたくなったんでFreeBSD 5-STABLEにあげることにする。</p>

<p>やったこと(あんまり親切に説明してないです)。</p>

<ul>
<li>ノートPCにマイクロドライブを差す</li>
<li>sysinstallでディスクのfdiskとdisklabel切り直し</li>
<li>ノートPCの適当な場所にマウント(ここでは /a とする)</li>
<li>FreeBSD 5.5-BETA1のbase/base.?? を/a以下にインストール</li>
<li>boot0cfg -b /boot/boot0sio adほげ でコンソールブートするようにする</li>
<li>/a/boot/loader.conf.local に<a href="https://gist.github.com/sumikawa/bc8a943cc9d5b9471c5cceb4d5045c23">これ</a>を置く</li>
<li>/a/etc/ttys に<a href="https://gist.github.com/sumikawa/4b5d0c4fc8a45a94574cd367fc044b73">パッチ</a>をあてる</li>
<li>/a/etc/fstabを適当に書く。僕はパーティション切らなかったので<a href="https://gist.github.com/sumikawa/46ea6c2eebfcb062ba90940326ee8727">これ</a></li>
</ul>

<p>で、ブートするかと思います。以下がdmesgの結果。</p>

<pre class="terminal">
Copyright (c) 1992-2006 The FreeBSD Project.
Copyright (c) 1979, 1980, 1983, 1986, 1988, 1989, 1991, 1992, 1993, 1994
        The Regents of the University of California. All rights reserved.
FreeBSD 5.5-PRERELEASE #2: Fri Feb 24 09:59:46 JST 2006
    sumikawa@prince.don.to:/usr/local/src/5-stable/src/sys/i386/compile/LAMB
Timecounter "i8254" frequency 1193182 Hz quality 0
CPU: AMD Enhanced Am486DX4/Am5x86 Write-Back (486-class CPU)
  Origin = "AuthenticAMD"  Id = 0x494  Stepping = 4
  Features=0x1<FPU>
real memory  = 33554432 (32 MB)
avail memory = 27668480 (26 MB)
npx0: <math processor> on motherboard
npx0: INT 16 interface
cpu0 on motherboard
isa0: <ISA bus> on motherboard
ata0 at port 0x3f6,0x1f0-0x1f7 irq 14 on isa0
atkbdc0: <Keyboard controller (i8042)> at port 0x64,0x60 on isa0
atkbd0: <AT Keyboard> irq 1 on atkbdc0
kbd0 at atkbd0
ed0 at port 0x300-0x31f iomem 0xd8000-0xdbfff irq 10 on isa0
ed0: Ethernet address: 00:30:f5:01:7a:01
ed0: if_start running deferred for Giant
ed0: type NE2000 (16 bit)
ed1 at port 0x200-0x21f irq 3 on isa0
ed1: Ethernet address: 00:30:f5:01:7a:00
ed1: if_start running deferred for Giant
ed1: type NE2000 (16 bit)
ppc0: <Parallel port> at port 0x378-0x37f irq 7 on isa0
ppc0: Generic chipset (NIBBLE-only) in COMPATIBLE mode
ppbus0: <Parallel port bus> on ppc0
lpt0: <Printer> on ppbus0
lpt0: Interrupt-driven port
sio0 at port 0x3f8-0x3ff irq 4 flags 0x10 on isa0
sio0: type 16550A, console
Timecounters tick every 10.000 msec
ad0: 1027MB <IBM-DSCM-11000/SC2IC915> [2088/16/63] at ata0-master PIO3
Mounting root from ufs:/dev/ad0s1a
</pre>

<p>最適化したカーネルを作りたいときはコンフィグは<a href="https://gist.github.com/sumikawa/ae481d73144ca1046ae2cb8e38d92a0e">これ</a>。</p>


          </main>

          <nav class="prev_next" style="text-align: center; margin: 1em 0;"><a href="/diary/2006/0221-fujinoya/">&laquo; prev</a><span style="margin: 0 1em;">|</span><a href="/diary/2006/0224-thai/">next &raquo;</a></nav>

          <hr />
          <div id="name">SUMIKAWA Munechika / Daydreamers On the Net</div>
        </div>
      </div>
      <div class="leftblock">
        <div class="eachindexblock nav">
  <ul id="gray">
      <li> <a href="/diary/2025.html">2025年</a></li>
      <li> <a href="/diary/2024.html">2024年</a></li>
      <li> <a href="/diary/2023.html">2023年</a></li>
      <li> <a href="/diary/2022.html">2022年</a></li>
      <li> <a href="/diary/2021.html">2021年</a></li>
      <li> <a href="/diary/2020.html">2020年</a></li>
      <li> <a href="/diary/2019.html">2019年</a></li>
      <li> <a href="/diary/2018.html">2018年</a></li>
      <li> <a href="/diary/2017.html">2017年</a></li>
      <li> <a href="/diary/2016.html">2016年</a></li>
      <li> <a href="/diary/2015.html">2015年</a></li>
      <li> <a href="/diary/2014.html">2014年</a></li>
      <li> <a href="/diary/2013.html">2013年</a></li>
      <li> <a href="/diary/2012.html">2012年</a></li>
      <li> <a href="/diary/2011.html">2011年</a></li>
      <li> <a href="/diary/2010.html">2010年</a></li>
      <li> <a href="/diary/2009.html">2009年</a></li>
      <li> <a href="/diary/2008.html">2008年</a></li>
      <li> <a href="/diary/2007.html">2007年</a></li>
      <li> <a href="/diary/2006.html">2006年</a></li>
      <li> <a href="/diary/2005.html">2005年</a></li>
      <li> <a href="/diary/2004.html">2004年</a></li>
      <li> <a href="/diary/2003.html">2003年</a></li>
      <li> <a href="/diary/2002.html">2002年</a></li>
      <li> <a href="/diary/2001.html">2001年</a></li>
      <li> <a href="/diary/2000.html">2000年</a></li>
      <li> <a href="/diary/1999.html">1999年</a></li>
      <li> <a href="/diary/1998.html">1998年</a></li>
      <li> <a href="/diary/1997.html">1997年</a></li>
      <li> <a href="/diary/1996.html">1996年</a></li>
    <li> <a href="/diary/1995.html">1995年以前</a></li>
  </ul>
</div>

      </div>
      <div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="pswp__bg"></div>
    <div class="pswp__scroll-wrap">
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>

    </div>
    <script src="/pagefind/pagefind-ui.js"></script>
    <script src="/javascripts/diary.js"></script>
    <script src="/javascripts/photoswipe.umd.min.js"></script>
    <script src="/javascripts/photoswipe-init.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.5.0/dist/mermaid.min.js"></script>
  </body>
</html>
